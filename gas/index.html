<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="generator" content="Hugo 0.56.0-DEV" />
    <meta name="description" content="Lity is a new programming language for building blockchain smart contracts.">


    <link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon" />
<link rel="icon" href="/images/favicon.png" type="image/x-icon" />
    <title>Free Gas :: The Lity Language and Virtual Machine for Smart Contracts</title>

    
    <meta property="og:title" content="Free Gas" />
    <meta property="og:description" content="Lity is a new programming language for building blockchain smart contracts." />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="http://www.litylang.org/gas/" />
    <meta property="og:image" content="http://www.litylang.org/images/lity@3x-pad.jpg" />

    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-120065893-5', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

    
    
    <link href="/css/nucleus.css?1555397061" rel="stylesheet">
    <link href="/css/font-awesome.min.css?1555397061" rel="stylesheet">
    <link href="/css/hybrid.css?1555397061" rel="stylesheet">
    <link href="/css/featherlight.min.css?1555397061" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1555397061" rel="stylesheet">
    <link href="/css/auto-complete.css?1555397061" rel="stylesheet">
    <link href="/css/theme.css?1555397061" rel="stylesheet">
    <link href="/css/hugo-theme.css?1555397061" rel="stylesheet">
    

    <script src="/js/jquery-2.x.min.js?1555397061"></script>
    
    <style type="text/css">
      :root #header + #content > #left > #rlblock_left{ 
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/gas/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="/">
  <img src='/images/lity@3x.png' alt="lityLogo" />
</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fa fa-search"></i></label>
    <input data-search-input id="search-by" type="text" placeholder="Search...">
    <span data-search-clear=""><i class="fa fa-close"></i></span>
</div>

<script type="text/javascript" src="/js/lunr.min.js?1555397061"></script>
<script type="text/javascript" src="/js/auto-complete.js?1555397061"></script>
<script type="text/javascript">
    
        var baseurl = '\/';
    
</script>
<script type="text/javascript" src="/js/search.js?1555397061"></script>

    
  </div>

    <div class="highlightable">
        <ul class="topics">    
                
                
                


 
  
    
    <li data-nav-id="/getting_started/" title="Getting started" class="dd-item 
        
        
        
        ">
      <a href="/getting_started/">
          Getting started
          
      </a>
      <ul id="sidebar-toc">
          <nav id="TableOfContents">
<ul>
<li><a href="#getting-started">Getting Started</a>
<ul>
<li>
<ul>
<li><a href="#download-and-install">Download and install</a></li>
<li><a href="#a-reverse-hello-world">A reverse Hello World</a></li>
<li><a href="#start-a-cybermiles-node">Start a CyberMiles node</a></li>
<li><a href="#run-the-smart-contract">Run the smart contract</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
      </ul>
      
              
    </li>
  
 

                
                


 
  
    
    <li data-nav-id="/performance/" title="Performance" class="dd-item 
        
        
        
        ">
      <a href="/performance/">
          Performance
          
      </a>
      <ul id="sidebar-toc">
          <nav id="TableOfContents">
<ul>
<li><a href="#performance">Performance</a>
<ul>
<li>
<ul>
<li><a href="#use">Use</a></li>
<li><a href="#develop">Develop</a></li>
<li><a href="#governance">Governance</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
      </ul>
      
              
    </li>
  
 

                
                


 
  
    
    <li data-nav-id="/security/" title="Security" class="dd-item 
        
        
        
        ">
      <a href="/security/">
          Security
          
      </a>
      <ul id="sidebar-toc">
          <nav id="TableOfContents">
<ul>
<li><a href="#security">Security</a>
<ul>
<li>
<ul>
<li><a href="#erc-checker">ERC checker</a></li>
<li><a href="#static-analysis">Static analysis</a></li>
<li><a href="#overflow-protection">Overflow protection</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
      </ul>
      
              
    </li>
  
 

                
                


 
  
    
    <li data-nav-id="/trusted/" title="Oracles" class="dd-item 
        
        
        
        ">
      <a href="/trusted/">
          Oracles
          
      </a>
      <ul id="sidebar-toc">
          <nav id="TableOfContents">
<ul>
<li><a href="#trusted-smart-contracts">Trusted Smart Contracts</a></li>
</ul>
</nav>
      </ul>
      
              
    </li>
  
 

                
                


 
  
    
    <li data-nav-id="/rand/" title="Random Numbers" class="dd-item 
        
        
        
        ">
      <a href="/rand/">
          Random Numbers
          
      </a>
      <ul id="sidebar-toc">
          <nav id="TableOfContents">
<ul>
<li><a href="#secure-random-numbers">Secure Random Numbers</a></li>
</ul>
</nav>
      </ul>
      
              
    </li>
  
 

                
                


 
  
    
    <li data-nav-id="/scheduler/" title="Scheduler" class="dd-item 
        
        
        
        ">
      <a href="/scheduler/">
          Scheduler
          
      </a>
      <ul id="sidebar-toc">
          <nav id="TableOfContents">
<ul>
<li><a href="#scheduler">Scheduler</a>
<ul>
<li>
<ul>
<li><a href="#challenge">Challenge</a></li>
<li><a href="#cybermiles-support">CyberMiles support</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
      </ul>
      
              
    </li>
  
 

                
                


 
  
    
    <li data-nav-id="/business_rules/" title="Business Rules" class="dd-item 
        
        
        
        ">
      <a href="/business_rules/">
          Business Rules
          
      </a>
      <ul id="sidebar-toc">
          <nav id="TableOfContents">
<ul>
<li><a href="#business-rules">Business Rules</a></li>
</ul>
</nav>
      </ul>
      
              
    </li>
  
 

                
                


 
  
    
    <li data-nav-id="/number/" title="Real Arithmetic" class="dd-item 
        
        
        
        ">
      <a href="/number/">
          Real Arithmetic
          
      </a>
      <ul id="sidebar-toc">
          <nav id="TableOfContents">
<ul>
<li><a href="#real-number-support">Real Number Support</a></li>
</ul>
</nav>
      </ul>
      
              
    </li>
  
 

                
                


 
  
    
    <li data-nav-id="/gas/" title="Free Gas" class="dd-item 
        parent
        active
        
        ">
      <a href="/gas/">
          Free Gas
          
      </a>
      <ul id="sidebar-toc">
          <nav id="TableOfContents">
<ul>
<li><a href="#free-gas">&ldquo;Free&rdquo; Gas</a></li>
</ul>
</nav>
      </ul>
      
              
    </li>
  
 

                
             
        </ul>
    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li> 
                  <a class="padding" href="https://github.com/CyberMiles/lity" target="_blank"><i class='fa fa-fw fa-github'></i> Lity source</a>
              </li>
          
              <li> 
                  <a class="padding" href="http://lity.readthedocs.io/" target="_blank"><i class='fa fa-fw fa-file'></i> Lity docs</a>
              </li>
          
              <li> 
                  <a class="padding" href="https://github.com/CyberMiles/libeni" target="_blank"><i class='fa fa-fw fa-github'></i> libENI source</a>
              </li>
          
              <li> 
                  <a class="padding" href="http://libeni.readthedocs.io/" target="_blank"><i class='fa fa-fw fa-file'></i> libENI docs</a>
              </li>
          
              <li> 
                  <a class="padding" href="https://github.com/CyberMiles/travis" target="_blank"><i class='fa fa-fw fa-github'></i> CyberMiles source</a>
              </li>
          
              <li> 
                  <a class="padding" href="http://travis.readthedocs.io/" target="_blank"><i class='fa fa-fw fa-file'></i> CyberMiles docs</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="footer">
      <center>
    
    <a class="github-button" href="https://github.com/CyberMiles/lity/archive/lity.zip" data-icon="octicon-cloud-download" aria-label="Download matcornic/hugo-theme-learn on GitHub">Download</a>

    
    <a class="github-button" href="https://github.com/CyberMiles/lity" data-icon="octicon-star" data-show-count="true" aria-label="Star matcornic/hugo-theme-learn on GitHub">Star</a>

    
    <a class="github-button" href="https://github.com/CyberMiles/lity/fork" data-icon="octicon-repo-forked" data-show-count="true" aria-label="Fork matcornic/hugo-theme-learn on GitHub">Fork</a>

</center>

<script async defer src="https://buttons.github.io/buttons.js"></script>

    </section>
  </div>
</nav>





        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
            
              <div>
                <div id="top-bar">
                
                
                <a id="mobile-logo" href="/">
                    <img src='/images/lity_blue@3x.png' alt="lityLogo" />
                  </a>
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fa fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fa fa-list-alt"></i></span>
                  
                  <span class="links">
                    
          
          
            
            
          
          
            <a href='/'>Litylang</a> > Free Gas
          
         
          
           
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
<ul>
<li><a href="#free-gas">&ldquo;Free&rdquo; Gas</a></li>
</ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            

        
          <div id="chapter">
        
        <div id="body-inner">
          

        




<h1 id="free-gas">&ldquo;Free&rdquo; Gas</h1>

<p>One of the major hurdles of blockchain application adoption is that end users are asked to pay a <code>gas</code> fee in order to perform certain functions on the blockchain. The gas mechanism is crucial for the blockchain&rsquo;s security, as it prevents DoS attackers from overwhelming the blockchain nodes with computationally intensive requests. However, the gas requirement also means that new end users must be taught to purchase cryptocurrencies and manage private keys before they can even start to use decentralized applications.</p>

<p>Lity provides an alternative approach to onboard new users to blockchain applications. Through the <code>freegas</code> keyword, the smart contract owner can designate a contract function should have gas fees paid by the owner herself. When the user calls those functions, she would indicate that she is not paying gas by setting the <code>gasPrice</code> to 0.</p>

<ul>
<li>If the <code>gasPrice=0</code> transaction calls a function that is NOT <code>freegas</code>, the transaction would fail.</li>
<li>If the <code>gasPrice=0</code> transaction calls a <code>freegas</code> function in a contract that does not have a balance, the transaction would fail.</li>
</ul>

<blockquote>
<p>Of course, the caller can specify a regular <code>gasPrice</code> (e.g., 2Gwei), and in that case, the caller pays for gas
even if the contract function is <code>freegas</code>.</p>
</blockquote>

<p>If the <code>gasPrice=0</code> transaction calls a <code>freegas</code> function in a contract that has sufficient balance, the function executes and the gas fee is deducted from the contract address. The caller pays nothing, and the contract pays gas at the system&rsquo;s standard gas price.</p>

<blockquote>
<p>There is a rate limit for making <code>gasPrice=0</code> transactions. The blockchain node software prevents
users from exploiting the system by sending a lot of free transactions.</p>
</blockquote>

<p>Below is an example. On the CyberMiles blockchain, if an end user calls the <code>test</code> function with <code>gasPrice=0</code> and the contract address has a CMT balance, the transaction&rsquo;s gas fee will come out of the contract address.</p>

<pre><code>pragma lity &gt;= 1.2.7;

contract FreeGasDemo {
  int a;
  function test (int input) public freegas returns (int) {
    a = input;
    return a;
  }

  function () public payable {}
}
</code></pre>

<p>The <code>payable</code> function is important as it allows the contract to receive CMTs that will later be used as gas.</p>

<p>The screen shots below show the free gas contract function in action.</p>

<p>1 Compile and deploy the contract using Europa IDE and Venus Wallet on CyberMiles blockchain.</p>

<p><img src="compile.png" alt="Compile" /></p>

<p>2 Fund some CMTs to be used as gas fees to the contract address.</p>

<p><img src="fund.png" alt="Fund" /></p>

<p>3 Call the contract function with zero <code>gasPrice</code> and the user account balance stays the same. The gas fee is paid from the contract&rsquo;s address.</p>

<p><img src="execute.png" alt="Execute" /></p>

<p><a href="https://lity.readthedocs.io/en/latest/freegas.html">Read more</a> about the <code>freegas</code> transactions.</p>


<footer class=" footline" >
	
</footer>

        
            </div> 
        
        </div> 
        

      </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1555397061"></script>
    <script src="/js/perfect-scrollbar.min.js?1555397061"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1555397061"></script>
    <script src="/js/jquery.sticky.js?1555397061"></script>
    <script src="/js/featherlight.min.js?1555397061"></script>
    <script src="/js/html5shiv-printshiv.min.js?1555397061"></script>
    <script src="/js/highlight.pack.js?1555397061"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom.71422.js?1555397061"></script>
    <script src="/js/learn.js?1555397061"></script>
    <script src="/js/hugo-learn.js?1555397061"></script>

    <link href="/mermaid/mermaid.css?1555397061" type="text/css" rel="stylesheet" />
    <script src="/mermaid/mermaid.js?1555397061"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    

<div class="custom-footer">
    <center>
        
        <a class="github-button" href="https://github.com/CyberMiles/lity/archive/lity.zip" data-icon="octicon-cloud-download" aria-label="Download matcornic/hugo-theme-learn on GitHub">Download</a>

        
        <a class="github-button" href="https://github.com/CyberMiles/lity" data-icon="octicon-star" data-show-count="true" aria-label="Star matcornic/hugo-theme-learn on GitHub">Star</a>

        
        <a class="github-button" href="https://github.com/CyberMiles/lity/fork" data-icon="octicon-repo-forked" data-show-count="true"
            aria-label="Fork matcornic/hugo-theme-learn on GitHub">Fork</a>

    </center>
    <center class="copyright-text">Copyright Â© 2018. All rights reserved</center>
    
    <script async defer src="https://buttons.github.io/buttons.js"></script>
</div>
  </body>
</html>
