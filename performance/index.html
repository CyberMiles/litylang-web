<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="generator" content="Hugo 0.56.0-DEV" />
    <meta name="description" content="Lity is a new programming language for building blockchain smart contracts.">


    <link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon" />
<link rel="icon" href="/images/favicon.png" type="image/x-icon" />
    <title>Performance :: The Lity Language and Virtual Machine for Smart Contracts</title>

    
    <meta property="og:title" content="Performance" />
    <meta property="og:description" content="Lity is a new programming language for building blockchain smart contracts." />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="http://www.litylang.org/performance/" />
    <meta property="og:image" content="http://www.litylang.org/images/lity@3x-pad.jpg" />

    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-120065893-5', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

    
    
    <link href="/css/nucleus.css?1555397061" rel="stylesheet">
    <link href="/css/font-awesome.min.css?1555397061" rel="stylesheet">
    <link href="/css/hybrid.css?1555397061" rel="stylesheet">
    <link href="/css/featherlight.min.css?1555397061" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1555397061" rel="stylesheet">
    <link href="/css/auto-complete.css?1555397061" rel="stylesheet">
    <link href="/css/theme.css?1555397061" rel="stylesheet">
    <link href="/css/hugo-theme.css?1555397061" rel="stylesheet">
    

    <script src="/js/jquery-2.x.min.js?1555397061"></script>
    
    <style type="text/css">
      :root #header + #content > #left > #rlblock_left{ 
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/performance/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="/">
  <img src='/images/lity@3x.png' alt="lityLogo" />
</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fa fa-search"></i></label>
    <input data-search-input id="search-by" type="text" placeholder="Search...">
    <span data-search-clear=""><i class="fa fa-close"></i></span>
</div>

<script type="text/javascript" src="/js/lunr.min.js?1555397061"></script>
<script type="text/javascript" src="/js/auto-complete.js?1555397061"></script>
<script type="text/javascript">
    
        var baseurl = '\/';
    
</script>
<script type="text/javascript" src="/js/search.js?1555397061"></script>

    
  </div>

    <div class="highlightable">
        <ul class="topics">    
                
                
                


 
  
    
    <li data-nav-id="/getting_started/" title="Getting started" class="dd-item 
        
        
        
        ">
      <a href="/getting_started/">
          Getting started
          
      </a>
      <ul id="sidebar-toc">
          <nav id="TableOfContents">
<ul>
<li><a href="#getting-started">Getting Started</a>
<ul>
<li>
<ul>
<li><a href="#download-and-install">Download and install</a></li>
<li><a href="#a-reverse-hello-world">A reverse Hello World</a></li>
<li><a href="#start-a-cybermiles-node">Start a CyberMiles node</a></li>
<li><a href="#run-the-smart-contract">Run the smart contract</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
      </ul>
      
              
    </li>
  
 

                
                


 
  
    
    <li data-nav-id="/performance/" title="Performance" class="dd-item 
        parent
        active
        
        ">
      <a href="/performance/">
          Performance
          
      </a>
      <ul id="sidebar-toc">
          <nav id="TableOfContents">
<ul>
<li><a href="#performance">Performance</a>
<ul>
<li>
<ul>
<li><a href="#use">Use</a></li>
<li><a href="#develop">Develop</a></li>
<li><a href="#governance">Governance</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
      </ul>
      
              
    </li>
  
 

                
                


 
  
    
    <li data-nav-id="/security/" title="Security" class="dd-item 
        
        
        
        ">
      <a href="/security/">
          Security
          
      </a>
      <ul id="sidebar-toc">
          <nav id="TableOfContents">
<ul>
<li><a href="#security">Security</a>
<ul>
<li>
<ul>
<li><a href="#erc-checker">ERC checker</a></li>
<li><a href="#static-analysis">Static analysis</a></li>
<li><a href="#overflow-protection">Overflow protection</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
      </ul>
      
              
    </li>
  
 

                
                


 
  
    
    <li data-nav-id="/trusted/" title="Oracles" class="dd-item 
        
        
        
        ">
      <a href="/trusted/">
          Oracles
          
      </a>
      <ul id="sidebar-toc">
          <nav id="TableOfContents">
<ul>
<li><a href="#trusted-smart-contracts">Trusted Smart Contracts</a></li>
</ul>
</nav>
      </ul>
      
              
    </li>
  
 

                
                


 
  
    
    <li data-nav-id="/rand/" title="Random Numbers" class="dd-item 
        
        
        
        ">
      <a href="/rand/">
          Random Numbers
          
      </a>
      <ul id="sidebar-toc">
          <nav id="TableOfContents">
<ul>
<li><a href="#secure-random-numbers">Secure Random Numbers</a></li>
</ul>
</nav>
      </ul>
      
              
    </li>
  
 

                
                


 
  
    
    <li data-nav-id="/scheduler/" title="Scheduler" class="dd-item 
        
        
        
        ">
      <a href="/scheduler/">
          Scheduler
          
      </a>
      <ul id="sidebar-toc">
          <nav id="TableOfContents">
<ul>
<li><a href="#scheduler">Scheduler</a>
<ul>
<li>
<ul>
<li><a href="#challenge">Challenge</a></li>
<li><a href="#cybermiles-support">CyberMiles support</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
      </ul>
      
              
    </li>
  
 

                
                


 
  
    
    <li data-nav-id="/business_rules/" title="Business Rules" class="dd-item 
        
        
        
        ">
      <a href="/business_rules/">
          Business Rules
          
      </a>
      <ul id="sidebar-toc">
          <nav id="TableOfContents">
<ul>
<li><a href="#business-rules">Business Rules</a></li>
</ul>
</nav>
      </ul>
      
              
    </li>
  
 

                
                


 
  
    
    <li data-nav-id="/number/" title="Real Arithmetic" class="dd-item 
        
        
        
        ">
      <a href="/number/">
          Real Arithmetic
          
      </a>
      <ul id="sidebar-toc">
          <nav id="TableOfContents">
<ul>
<li><a href="#real-number-support">Real Number Support</a></li>
</ul>
</nav>
      </ul>
      
              
    </li>
  
 

                
                


 
  
    
    <li data-nav-id="/gas/" title="Free Gas" class="dd-item 
        
        
        
        ">
      <a href="/gas/">
          Free Gas
          
      </a>
      <ul id="sidebar-toc">
          <nav id="TableOfContents">
<ul>
<li><a href="#free-gas">&ldquo;Free&rdquo; Gas</a></li>
</ul>
</nav>
      </ul>
      
              
    </li>
  
 

                
             
        </ul>
    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li> 
                  <a class="padding" href="https://github.com/CyberMiles/lity" target="_blank"><i class='fa fa-fw fa-github'></i> Lity source</a>
              </li>
          
              <li> 
                  <a class="padding" href="http://lity.readthedocs.io/" target="_blank"><i class='fa fa-fw fa-file'></i> Lity docs</a>
              </li>
          
              <li> 
                  <a class="padding" href="https://github.com/CyberMiles/libeni" target="_blank"><i class='fa fa-fw fa-github'></i> libENI source</a>
              </li>
          
              <li> 
                  <a class="padding" href="http://libeni.readthedocs.io/" target="_blank"><i class='fa fa-fw fa-file'></i> libENI docs</a>
              </li>
          
              <li> 
                  <a class="padding" href="https://github.com/CyberMiles/travis" target="_blank"><i class='fa fa-fw fa-github'></i> CyberMiles source</a>
              </li>
          
              <li> 
                  <a class="padding" href="http://travis.readthedocs.io/" target="_blank"><i class='fa fa-fw fa-file'></i> CyberMiles docs</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="footer">
      <center>
    
    <a class="github-button" href="https://github.com/CyberMiles/lity/archive/lity.zip" data-icon="octicon-cloud-download" aria-label="Download matcornic/hugo-theme-learn on GitHub">Download</a>

    
    <a class="github-button" href="https://github.com/CyberMiles/lity" data-icon="octicon-star" data-show-count="true" aria-label="Star matcornic/hugo-theme-learn on GitHub">Star</a>

    
    <a class="github-button" href="https://github.com/CyberMiles/lity/fork" data-icon="octicon-repo-forked" data-show-count="true" aria-label="Fork matcornic/hugo-theme-learn on GitHub">Fork</a>

</center>

<script async defer src="https://buttons.github.io/buttons.js"></script>

    </section>
  </div>
</nav>





        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
            
              <div>
                <div id="top-bar">
                
                
                <a id="mobile-logo" href="/">
                    <img src='/images/lity_blue@3x.png' alt="lityLogo" />
                  </a>
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fa fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fa fa-list-alt"></i></span>
                  
                  <span class="links">
                    
          
          
            
            
          
          
            <a href='/'>Litylang</a> > Performance
          
         
          
           
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
<ul>
<li><a href="#performance">Performance</a>
<ul>
<li>
<ul>
<li><a href="#use">Use</a></li>
<li><a href="#develop">Develop</a></li>
<li><a href="#governance">Governance</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            

        
          <div id="chapter">
        
        <div id="body-inner">
          

        




<h1 id="performance">Performance</h1>

<p>The Lity virtual machine supports heavy optimization for specific computing
tasks by extending the virtual machine runtime using
C++ or other high performance native techniques.
This approach is called Ethereum Native Interface (ENI): <a href="http://libeni.readthedocs.io/en/latest/">libENI</a>.</p>

<p>On the CyberMiles blockchain, we provide libENI functions optimized for
common e-commerce scenarios, such as PKI-based encrytion to protect privacy.
But as a general virtual machine technology, libENI can be utilized to
optimize many different kinds of blockchain virtual machines.</p>

<blockquote>
<p>For instance, using Ethereum smart contract to verify header of
a single bitcoin transaction (i.e., a scrypt operation) will cost 370M
Ethereum gas, which is more than 1 Billion Gwei (1 ETH) at the gas price
of 3 Gwei. And it has to be done across multiple
Ethereum blocks to avoid exceeding the block gas limit.
In libENI, the entire scrypt operation can be completed with one function call.
It takes milli-seconds and consumes a few pennies of gas fees.
You can <a href="http://lity.readthedocs.io/en/latest/verify-dogecoin-block-on-travis.html">learn more here</a>.</p>
</blockquote>

<h3 id="use">Use</h3>

<p>An increasing number of libENI functions are already integrated into the
Travis software and the CyberMiles blockchain network. To use them in your
smart contarct is to simply use the <code>eni</code> keyword together with the libENI
function name and function parameters. For example, the <code>scrypt</code> function
works like the following. It takes the <code>block_header_hex</code> from a Dogecoin block
as the input paremeter.</p>

<pre><code>contract DogecoinVerifier {
  function verifyBlock(uint version, string prev_block, string merkle_root, uint timestamp, string bits, uint nouce) pure public returns (bool) {
    DogecoinBlockHeader memory block_header = DogecoinBlockHeader(version, prev_block, merkle_root, timestamp, bits, nouce);
    string memory block_header_hex = generateBlockHeader(block_header);
    string memory pow_hash = reverseHex(eni(&quot;scrypt&quot;, block_header_hex));
    uint256 target = bitsToTarget(bits);
    if (hexToUint(pow_hash) &gt; target) {
      return false;
    }
    return true;
  }
  ...
}
</code></pre>

<h3 id="develop">Develop</h3>

<p>To develop a new libENI function, you will need two things:</p>

<ol>
<li>To implement the function in native C++.</li>
<li>To implement how to compute gas fees for this function.</li>
<li>To build the function into a shared library file.</li>
<li>To deploy this library file so that the virtual machine can find it when executing the contracts.</li>
</ol>

<p>Notice that we only need to copy the shared library to a file location where
the virtual machine can find it. There is no change to the virtual machine
itself. That allows new libENI functions to be dynamically deployed (and removed)
without any change to the rest of the system. That is an especially desirable
feature for blockchains where we cannot stop and restart to deploy new features.</p>

<p>For more details, please refer to the
<a href="http://libeni.readthedocs.io/en/latest/developer-guide.html">libENI developer guide</a>.</p>

<h3 id="governance">Governance</h3>

<p>While anyone can create a new libENI function, all public blockchains have
governance structures to determine which functions should be made available
on the blockchain. In the case of the CyberMiles blockchain, validators make
this decision.</p>

<p>Validators use <a href="http://travis.readthedocs.io/en/latest/governance.html">governance transactions</a> to propose new libENI functions,
and vote to accept them. Once a libENI function is accepted, all nodes will
process the governance transaction and download the shared library to
the local appropriate data directory.</p>


<footer class=" footline" >
	
</footer>

        
            </div> 
        
        </div> 
        

      </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1555397061"></script>
    <script src="/js/perfect-scrollbar.min.js?1555397061"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1555397061"></script>
    <script src="/js/jquery.sticky.js?1555397061"></script>
    <script src="/js/featherlight.min.js?1555397061"></script>
    <script src="/js/html5shiv-printshiv.min.js?1555397061"></script>
    <script src="/js/highlight.pack.js?1555397061"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom.71422.js?1555397061"></script>
    <script src="/js/learn.js?1555397061"></script>
    <script src="/js/hugo-learn.js?1555397061"></script>

    <link href="/mermaid/mermaid.css?1555397061" type="text/css" rel="stylesheet" />
    <script src="/mermaid/mermaid.js?1555397061"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    

<div class="custom-footer">
    <center>
        
        <a class="github-button" href="https://github.com/CyberMiles/lity/archive/lity.zip" data-icon="octicon-cloud-download" aria-label="Download matcornic/hugo-theme-learn on GitHub">Download</a>

        
        <a class="github-button" href="https://github.com/CyberMiles/lity" data-icon="octicon-star" data-show-count="true" aria-label="Star matcornic/hugo-theme-learn on GitHub">Star</a>

        
        <a class="github-button" href="https://github.com/CyberMiles/lity/fork" data-icon="octicon-repo-forked" data-show-count="true"
            aria-label="Fork matcornic/hugo-theme-learn on GitHub">Fork</a>

    </center>
    <center class="copyright-text">Copyright © 2018. All rights reserved</center>
    
    <script async defer src="https://buttons.github.io/buttons.js"></script>
</div>
  </body>
</html>
